name: Untouchables
run-name: Check untouchables folder
on: [pull_request]
jobs:
  check-untouchables:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v2
        with:
          fetch-depth: 2

      - name: Get changed files
        id: get-changed-files
        run: |
          git diff ${{ github.event.pull_request.base.sha }} --name-only
      
      - name: Check untouchable files
        run: |
          for changed_file in ${{ steps.get-changed-files.outputs.all }}; do
            echo ${changed_file};
            if grep -q ^untouchables/ <<< ${changed_file}
            then
              echo "Something happened in untouchables/";
            fi
          done
